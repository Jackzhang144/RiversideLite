# 清水河畔助手 Lite

Chrome 扩展，用于在清水河畔论坛收到提醒与站内信时实时显示徽标与通知，并提供便捷跳转。无打包流程，直接加载源码即可。

## 功能概览
- 徽标与桌面通知：后台定时轮询，显示未读提醒与站内信数量，点击通知或弹窗项直接打开对应帖子/私信。
- 弹窗摘要：`popup.html`/`popup.js` 展示新提醒与私信摘要，支持“标记已读”。
- 版本切换：在选项页选择“新版/旧版”界面，决定跳转链接与主页入口。
- 域名切换：可在选项页选择默认域名或“代理河畔”（`bbs.uestcer.org`）以适配不同网络环境。
- 权限：请求 `bbs.uestc.edu.cn` 与 `bbs.uestcer.org` 域名、cookies、storage、notifications、alarms、scripting 等运行所需权限。

## 安装与使用
1. 打开 `chrome://extensions`，启用“开发者模式”。
2. 点击“加载已解压的扩展程序”，选择仓库根目录。
3. 修改代码后，在扩展页点击“重新加载”；弹窗调试：打开弹窗后右键→“检查”；后台日志：在扩展页打开“service worker”开发者工具。
4. 进入选项页（扩展卡片中的“详情”→“扩展选项”）切换站点版本或关闭通知。

## 目录结构
- `manifest.json`：扩展声明、权限与入口文件。
- `background.js`：service worker，负责定时检查、调用消息摘要 API、更新徽标/通知。
- `popup.html` / `popup.js`：弹窗 UI 与交互。
- `options.html` / `options.js`：选项页设置（通知开关、版本选择）。
- `River.png`：扩展图标。

## 开发提示
- 代码风格：JavaScript 2 空格缩进、分号、`const/let`，倾向箭头函数与早返回；保持用户可见文案为简体中文。
- 快速语法检查：`node --check background.js`（或其他 JS 文件）后再重新加载扩展。
- 测试要点：确认已登录后徽标数字正确更新；弹窗加载失败时提示；“标记已读”后徽标清零；新旧版本跳转和通知点击的目标页面正确。
